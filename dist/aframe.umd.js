!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.aframe=t()}(this,function(){"use strict";function n(n){if(null==n)return{id:-1};var t={};return t.id=requestAnimationFrame(function r(){!1!==n()&&(t.id=requestAnimationFrame(r))}),t}function t(t,r){for(var i=arguments.length,e=Array(i>2?i-2:0),a=2;a<i;a++)e[a-2]=arguments[a];if(null==t)return{id:-1};r=r||0;var u=Date.now();return n(function(){var n=Date.now();if(n-u>=r){if(!1===t.apply(null,e))return!1;u=n}})}function r(n,t){return t?r(t,n%t):n}function i(n){return n&&!0===n.__fraction}function e(n,t){return i(n)?n:a(n,t)}function a(n,t){var i=0,e=1,a=1;if(null==n||isNaN(n))i=e=NaN;else if(void 0!==t){if(i=Math.abs(n),0===(e=Math.abs(t)))throw new Error("division by zero");a=n*t}else if(n<0&&(a=n,n=-n),n%1==0)i=n;else{i=n.toString().replace(/\d+[.]/,""),e=Math.pow(10,i.length),n>1&&(i=+i+Math.floor(n)*e);var u=r(i,e);i/=u,e/=u}return{n:i,d:e,s:a<0?-1:1}}!function(){for(var n=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[t[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,r){var i=(new Date).getTime(),e=Math.max(0,16-(i-n)),a=window.setTimeout(function(){t(i+e)},e);return n=i+e,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}();var u={__fraction:!0,valueOf:function(){return this.s*this.n/this.d},add:function(n){var t=e(n);return o(this.s*this.n*t.d+t.s*t.n*this.d,this.d*t.d)},subtract:function(n){var t=e(n);return o(this.s*this.n*t.d-t.s*t.n*this.d,this.d*t.d)},multiply:function(n){var t=e(n);return o(this.s*t.s*this.n*t.n,this.d*t.d)},divide:function(n){var t=e(n);return o(this.s*t.s*this.n*t.d,this.d*t.n)}};function o(n,t){var r=e(n,t),i=Object.create(u);return i.n=r.n,i.d=r.d,i.s=r.s,i}var f=o;return{clear:function(n){var t;(t=n)&&"number"==typeof t.id&&(cancelAnimationFrame(n.id),n.id=-1)},setInterval:t,setTimeout:function(n,r){for(var i=arguments.length,e=Array(i>2?i-2:0),a=2;a<i;a++)e[a-2]=arguments[a];return null==n?{id:-1}:t(function(){return n.apply(null,e),!1},r)},waitTimeout:function(n,r){for(var i=arguments.length,e=Array(i>2?i-2:0),a=2;a<i;a++)e[a-2]=arguments[a];var u=0,o={},f=[];return setTimeout(function(){!function n(){var r=f[u++];if(void 0!==r){var i=r[0];if(null==i)return n();r[0]=function(){return!1!==i.apply(null,arguments)&&-1!==o.id&&n(),!1};var e=t.apply(null,r).id;o.id=e}}()},0),function n(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return f.push(r),o={waitTimeout:n,id:-1}}.apply(null,arguments)},setTaskout:function(n,r,i){for(var e=arguments.length,a=Array(e>3?e-3:0),u=3;u<e;u++)a[u-3]=arguments[u];if(null==n)return{id:-1};i=i&&i>0?i:1;var o=f(0),d=f(1,i),l=t(function(){return o<1&&-1!==l.id&&(o=o.add(d),!1!==n.apply(void 0,[o.valueOf()].concat(a)))},Math.round(r/i));return l},setRandval:function(n,r,i){for(var e=arguments.length,a=Array(e>3?e-3:0),u=3;u<e;u++)a[u-3]=arguments[u];if(null==n)return{id:-1};var o={};return function e(u){if(-1!==o.id){if(!u&&!1===n.apply(null,a))return!1;var f=r+(l=i,(2*Math.random()-1)*l);f<0&&(f=0);var d=t(e,f).id;o.id=d}var l;return!1}(!0),o}}});
