!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.aframe=t()}(this,function(){"use strict";function n(n){if(null==n)return{id:-1};const t={},e=()=>{!1!==n()&&(t.id=requestAnimationFrame(e))};return t.id=requestAnimationFrame(e),t}function t(t,e,...i){if(null==t)return{id:-1};e=e||0;let r=Date.now();return n(()=>{let n=Date.now();if(n-r>=e){if(!1===t.apply(null,i))return!1;r=n}})}function e(n,t){return t?e(t,n%t):n}function i(n){return n&&!0===n.__fraction}function r(n,t){return i(n)?n:u(n,t)}function u(n,t){let i=0,r=1,u=1;if(null==n||isNaN(n))i=r=NaN;else if(void 0!==t){if(i=Math.abs(n),0===(r=Math.abs(t)))throw new Error("division by zero");u=n*t}else if(n<0&&(u=n,n=-n),n%1==0)i=n;else{i=n.toString().replace(/\d+[.]/,""),r=Math.pow(10,i.length),n>1&&(i=+i+Math.floor(n)*r);let t=e(i,r);i/=t,r/=t}return{n:i,d:r,s:u<0?-1:1}}!function(){for(var n=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),u=window.setTimeout(function(){t(i+r)},r);return n=i+r,u}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}();const o={__fraction:!0,valueOf:function(){return this.s*this.n/this.d},add:function(n){let t=r(n);return a(this.s*this.n*t.d+t.s*t.n*this.d,this.d*t.d)},subtract:function(n){let t=r(n);return a(this.s*this.n*t.d-t.s*t.n*this.d,this.d*t.d)},multiply:function(n){let t=r(n);return a(this.s*t.s*this.n*t.n,this.d*t.d)},divide:function(n){let t=r(n);return a(this.s*t.s*this.n*t.d,this.d*t.n)}};function a(n,t){let e=r(n,t),i=Object.create(o);return i.n=e.n,i.d=e.d,i.s=e.s,i}var l=a;return{clear:function(n){var t;(t=n)&&"number"==typeof t.id&&(cancelAnimationFrame(n.id),n.id=-1)},setInterval:t,setTimeout:function(n,e,...i){return null==n?{id:-1}:t(()=>(n.apply(null,i),!1),e)},waitTimeout:function(n,e,...i){let r=0,u={};const o=[],a=(...n)=>(o.push(n),u={waitTimeout:a,id:-1});return setTimeout(()=>{const n=()=>{let e=o[r++];if(void 0===e)return;let i=e[0];if(null==i)return n();e[0]=function(){return!1!==i.apply(null,arguments)&&-1!==u.id&&n(),!1};let{id:a}=t.apply(null,e);u.id=a};n()},0),a.apply(null,arguments)},setTaskout:function(n,e,i,...r){if(null==n)return{id:-1};i=i&&i>0?i:1;let u=l(0),o=l(1,i);const a=t(()=>u<1&&-1!==a.id&&(u=u.add(o),!1!==n(u.valueOf(),...r)),Math.round(e/i));return a},setRandval:function(n,e,i,...r){if(null==n)return{id:-1};const u={},o=l=>{if(-1!==u.id){if(!l&&!1===n.apply(null,r))return!1;let d=e+(a=i,(2*Math.random()-1)*a);d<0&&(d=0);let{id:s}=t(o,d);u.id=s}return!1};var a;return o(!0),u}}});
